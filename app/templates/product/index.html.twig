{% extends 'base.html.twig' %}

{% block title %}Tous nos produits Pokémon - Cartes, Figurines, Accessoires | Destocard{% endblock %}

{% block meta_description %}Parcourez notre vaste sélection de produits Pokémon : cartes à collectionner rares, boosters, figurines, jeux et accessoires. Trouvez la pièce manquante à votre collection chez Destocard !{% endblock %}

{% block body %}
<div class="products-container">
    <h1>Nos Produits</h1>

    <div class="products-grid">
        {% for product in pagination %}
            <div class="product-card">
                {% if product.media|length > 0 %}
                    <img src="{{ asset(product.media|first.path) }}" alt="{{ product.title }}">
                {% else %}
                    <img src="{{ asset('images/placeholder.png') }}" alt="Image non disponible">
                {% endif %}
                <h3>{{ product.title }}</h3>
                <p class="price">{{ product.price }} €</p>
                <p class="description">{{ product.description }}</p>
                <div class="product-actions">
                    {% if app.user %}
                        <button class="like-button {% if product in app.user.likes %}active{% endif %}" data-product-id="{{ product.id }}" aria-label="Ajouter {{ product.title }} aux favoris">
                            ❤️
                        </button>
                    {% endif %}
                    <form method="post" action="{{ path('add_to_cart', {'id': product.id}) }}" class="add-to-cart-form">
                        <button type="submit" aria-label="Ajouter {{ product.title }} au panier">Ajouter au panier</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="navigation text-center">
        {{ knp_pagination_render(pagination) }}
    </div>
</div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {# Le script AJAX pour les favoris et le panier est déjà dans ajax.js #}
{% endblock %}
