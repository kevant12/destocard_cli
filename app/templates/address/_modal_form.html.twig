{#
    templates/address/_modal_form.html.twig
    =========================================

    Ce template est un "partiel" : il ne peut pas √™tre affich√© seul.
    Il contient uniquement le HTML du formulaire d'ajout/modification d'adresse
    et est destin√© √† √™tre charg√© en AJAX dans une modale.

    Logique :
    - Est rendu par `AddressController::newModal` ou `AddressController::editModal`.
    - Le formulaire est soumis en AJAX par `address.js` √† `AddressController::create`
      ou `AddressController::update`.
    - En cas d'erreur de validation, le contr√¥leur peut renvoyer ce m√™me template
      r√©-affich√© avec les messages d'erreur.

    Variables Cl√©s :
    - `modal_title`: Le titre √† afficher dans l'en-t√™te de la modale.
    - `form`: L'objet FormView de `AddressFormType`.
    - `address`: L'entit√© `Addresses`, soit nouvelle, soit celle en cours d'√©dition.
#}

{# L'en-t√™te de la modale avec le titre dynamique et le bouton de fermeture. #}
<div class="modal-header">
    <h3 class="modal-title">{{ modal_title }}</h3>
    <button type="button" class="modal-close" aria-label="Fermer">√ó</button>
</div>

{# Le corps de la modale contenant le formulaire. #}
<div class="modal-body">
    {{ form_start(form, {
        'attr': {
            'id': 'address-form',
            'class': 'address-form',
            'data-address-id': address.id ?? '' {# L'ID est utilis√© par JS pour l'URL d'update. #}
        }
    }) }}
    
    <div class="form-grid">
        <div class="form-group">
            {{ form_label(form.number, null, {'attr': {'class': 'form-label'}}) }}
            {{ form_widget(form.number, {'attr': {'class': 'form-control'}}) }}
            {{ form_errors(form.number) }}
            {% if form.number.vars.help %}
                <div class="form-help">{{ form.number.vars.help }}</div>
            {% endif %}
        </div>

        <div class="form-group form-group--span-2">
            {{ form_label(form.street, null, {'attr': {'class': 'form-label form-required'}}) }}
            {{ form_widget(form.street, {'attr': {'class': 'form-control'}}) }}
            {{ form_errors(form.street) }}
        </div>
    </div>

    <div class="form-grid">
        <div class="form-group">
            {{ form_label(form.zipCode, null, {'attr': {'class': 'form-label form-required'}}) }}
            {{ form_widget(form.zipCode, {'attr': {'class': 'form-control'}}) }}
            {{ form_errors(form.zipCode) }}
            {% if form.zipCode.vars.help %}
                <div class="form-help">{{ form.zipCode.vars.help }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form_label(form.city, null, {'attr': {'class': 'form-label form-required'}}) }}
            {{ form_widget(form.city, {'attr': {'class': 'form-control'}}) }}
            {{ form_errors(form.city) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.country, null, {'attr': {'class': 'form-label form-required'}}) }}
        {{ form_widget(form.country, {'attr': {'class': 'form-control'}}) }}
        {{ form_errors(form.country) }}
    </div>

    <div class="form-group">
        {{ form_label(form.type, null, {'attr': {'class': 'form-label form-required'}}) }}
        {{ form_widget(form.type, {'attr': {'class': 'form-control'}}) }}
        {{ form_errors(form.type) }}
        {% if form.type.vars.help %}
            <div class="form-help">{{ form.type.vars.help }}</div>
        {% endif %}
    </div>

    <div class="form-actions">
        <button type="button" class="btn btn--secondary" id="cancel-address">Annuler</button>
        <button type="submit" class="btn btn--primary">
            {# Le texte du bouton s'adapte s'il s'agit d'une cr√©ation ou d'une modification. #}
            {% if address.id %}
                ‚úèÔ∏è Modifier l'adresse
            {% else %}
                üíæ Enregistrer l'adresse
            {% endif %}
        </button>
    </div>

    {{ form_end(form) }}
</div> 