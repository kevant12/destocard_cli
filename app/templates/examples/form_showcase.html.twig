{% extends 'base.html.twig' %}

{% block title %}Showcase des Formulaires - Destocard{% endblock %}

{% block body %}
<div class="form-container">
    <h1 class="site-title">Showcase des Formulaires Destocard</h1>
    <p class="text-center">D√©monstration du syst√®me de formulaires complet</p>

    {# Formulaire d'authentification type #}
    <section class="form-page">
        <div class="auth-card">
            <h2 class="site-title">Formulaire d'Authentification</h2>
            
            <form method="post">
                <div class="form-group">
                    <label for="email" class="form-label form-required">Email</label>
                    <input type="email" id="email" class="form-control" placeholder="votre@email.com" required>
                    <div class="form-help">Nous ne partagerons jamais votre email</div>
                </div>

                <div class="form-group">
                    <label for="password" class="form-label form-required">Mot de passe</label>
                    <input type="password" id="password" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>

                <div class="form-check">
                    <input type="checkbox" id="remember" class="form-check-input">
                    <label for="remember" class="form-check-label">Se souvenir de moi</label>
                </div>

                <div class="form-actions form-actions--center">
                    <button type="submit" class="btn btn--primary">Se connecter</button>
                </div>
            </form>
        </div>
    </section>

    {# Formulaire de produit avanc√© #}
    <section>
        <h2>Formulaire de Produit (Layout Avanc√©)</h2>
        
        <form method="post" enctype="multipart/form-data">
            <div class="form-columns">
                <div class="form-column-left">
                    <fieldset>
                        <legend>Informations Produit</legend>
                        
                        <div class="form-group">
                            <label for="title" class="form-label form-required">Titre du produit</label>
                            <input type="text" id="title" class="form-control" placeholder="Ex: Dracaufeu Holographique">
                            <div class="form-counter">0/100 caract√®res</div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="category" class="form-label">Cat√©gorie</label>
                                <select id="category" class="form-control">
                                    <option value="">Choisir une cat√©gorie</option>
                                    <option value="cards">Cartes √† collectionner</option>
                                    <option value="figures">Figurines</option>
                                    <option value="accessories">Accessoires</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="price" class="form-label form-required">Prix (‚Ç¨)</label>
                                <input type="number" id="price" class="form-control" min="0" step="0.01" placeholder="0.00">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">√âtat du produit</label>
                            <div class="form-radio-group">
                                <div class="form-check">
                                    <input type="radio" id="new" name="condition" value="new" class="form-check-input">
                                    <label for="new" class="form-check-label">Neuf</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="excellent" name="condition" value="excellent" class="form-check-input">
                                    <label for="excellent" class="form-check-label">Excellent</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="good" name="condition" value="good" class="form-check-input">
                                    <label for="good" class="form-check-label">Bon</label>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>

                <div class="form-column-right">
                    <fieldset>
                        <legend>Description & M√©dias</legend>
                        
                        <div class="form-group">
                            <label for="description" class="form-label">Description</label>
                            <textarea id="description" class="form-control" rows="5" placeholder="D√©crivez votre article en d√©tail..."></textarea>
                            <div class="form-help">Une bonne description augmente vos chances de vente</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Photos du produit</label>
                            <div class="form-image-upload">
                                <div class="form-file-input">
                                    <input type="file" id="images" multiple accept="image/*">
                                    <label for="images" class="form-file-label">
                                        üì∑ Choisir des photos
                                    </label>
                                </div>
                                <button type="button" class="btn btn--secondary">üì± Webcam</button>
                            </div>
                            <div id="image-preview-container"></div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn btn--secondary">Aper√ßu</button>
                <button type="submit" class="btn btn--primary">Publier l'annonce</button>
            </div>
        </form>
    </section>

    {# Formulaire de recherche avec filtres #}
    <section>
        <h2>Filtres de Recherche</h2>
        
        <div class="search-filters">
            <form method="get">
                <div class="form-inline">
                    <div class="form-group">
                        <label for="search" class="form-label">Rechercher</label>
                        <input type="search" id="search" class="form-control" placeholder="Nom de carte, Pok√©mon...">
                    </div>

                    <div class="form-group">
                        <label for="filter-category" class="form-label">Cat√©gorie</label>
                        <select id="filter-category" class="form-control">
                            <option value="">Toutes</option>
                            <option value="cards">Cartes</option>
                            <option value="figures">Figurines</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="filter-price" class="form-label">Prix max (‚Ç¨)</label>
                        <input type="number" id="filter-price" class="form-control" min="0" placeholder="100">
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn--primary">üîç Rechercher</button>
                    </div>
                </div>
            </form>
        </div>
    </section>

    {# Exemples de validation #}
    <section>
        <h2>√âtats de Validation</h2>
        
        <div class="form-grid">
            <div class="form-group">
                <label for="valid-field" class="form-label">Champ valide</label>
                <input type="text" id="valid-field" class="form-control valid" value="Valeur correcte">
                <div class="form-help">‚úì Ce champ est valide</div>
            </div>

            <div class="form-group">
                <label for="invalid-field" class="form-label">Champ invalide</label>
                <input type="email" id="invalid-field" class="form-control is-invalid" value="email-invalide">
                <div class="form-error">Veuillez saisir une adresse email valide</div>
            </div>

            <div class="form-group">
                <label for="disabled-field" class="form-label">Champ d√©sactiv√©</label>
                <input type="text" id="disabled-field" class="form-control" value="Non modifiable" disabled>
            </div>

            <div class="form-group">
                <label for="loading-field" class="form-label">Champ en chargement</label>
                <div class="form-loading">
                    <input type="text" id="loading-field" class="form-control" placeholder="Chargement...">
                </div>
            </div>
        </div>
    </section>

    {# Formulaire avec ic√¥nes #}
    <section>
        <h2>Formulaire avec Ic√¥nes</h2>
        
        <div class="form-grid">
            <div class="form-group-icon">
                <label for="email-icon" class="form-label">Email avec ic√¥ne</label>
                <div class="form-icon">üìß</div>
                <input type="email" id="email-icon" class="form-control" placeholder="votre@email.com">
            </div>

            <div class="form-group-icon">
                <label for="phone-icon" class="form-label">T√©l√©phone avec ic√¥ne</label>
                <div class="form-icon">üì±</div>
                <input type="tel" id="phone-icon" class="form-control" placeholder="06 12 34 56 78">
            </div>
        </div>
    </section>

    {# Guide d'utilisation #}
    <section style="margin-top: 3rem; padding: 2rem; background-color: var(--surface-elevated); border-radius: var(--border-radius-lg);">
        <h2>Guide d'Utilisation</h2>
        
        <h3>Classes Principales</h3>
        <ul>
            <li><code>.form-container</code> - Conteneur principal pour les formulaires</li>
            <li><code>.form-columns</code> - Layout en 2 colonnes responsive</li>
            <li><code>.form-grid</code> - Grille flexible pour plusieurs champs</li>
            <li><code>.form-group</code> - Groupe de champ avec espacement</li>
            <li><code>.form-label</code> - Label stylis√© et accessible</li>
            <li><code>.form-control</code> - Champ de saisie standard</li>
            <li><code>.form-actions</code> - Conteneur pour les boutons d'action</li>
        </ul>

        <h3>Classes de Validation</h3>
        <ul>
            <li><code>.valid</code> - √âtat valide (bordure verte)</li>
            <li><code>.is-invalid</code> - √âtat invalide (bordure rouge)</li>
            <li><code>.form-error</code> - Message d'erreur</li>
            <li><code>.form-help</code> - Texte d'aide</li>
        </ul>

        <h3>Composants Sp√©ciaux</h3>
        <ul>
            <li><code>.form-check</code> - Checkbox/Radio button</li>
            <li><code>.form-radio-group</code> - Groupe de radio buttons</li>
            <li><code>.form-file-input</code> - Upload de fichier stylis√©</li>
            <li><code>.search-filters</code> - Panneau de filtres</li>
            <li><code>.form-loading</code> - √âtat de chargement</li>
        </ul>
    </section>
</div>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script>
/**
 * Scripts de d√©monstration pour le showcase des formulaires
 * Charg√© avec defer - le DOM est automatiquement pr√™t
 */

// Compteur de caract√®res pour le champ titre
const titleInput = document.getElementById('title');
const counter = titleInput.parentNode.querySelector('.form-counter');

titleInput.addEventListener('input', function() {
    const length = this.value.length;
    counter.textContent = `${length}/100 caract√®res`;
    
    if (length > 80) {
        counter.className = 'form-counter warning';
    } else if (length > 95) {
        counter.className = 'form-counter error';
    } else {
        counter.className = 'form-counter';
    }
});

// Pr√©visualisation des images s√©lectionn√©es
const fileInput = document.getElementById('images');
const previewContainer = document.getElementById('image-preview-container');

fileInput.addEventListener('change', function() {
    previewContainer.innerHTML = '';
    
    Array.from(this.files).forEach(file => {
        if (file.type.startsWith('image/')) {
            const img = document.createElement('img');
            img.className = 'img-preview';
            img.src = URL.createObjectURL(file);
            img.onload = () => URL.revokeObjectURL(img.src);
            previewContainer.appendChild(img);
        }
    });
});

// Validation en temps r√©el de l'email dans les exemples
const emailField = document.getElementById('invalid-field');
emailField.addEventListener('input', function() {
    const isValid = this.value.includes('@') && this.value.includes('.');
    this.className = isValid ? 'form-control valid' : 'form-control is-invalid';
});
</script>
{% endblock %} 